# Claude Code Remote Control プロジェクト概要

## プロジェクト概要

Windows上で動作するClaude CodeをiPhoneからリモート制御するためのWebアプリケーション。WebSocketを使用したリアルタイム通信により、モバイルデバイスからClaude Codeのコマンドを実行し、結果を確認できる。

## 当面のゴール

### 短期目標（現在達成済み）
1. ✅ 基本的なWebSocketサーバーの実装
2. ✅ iPhone最適化されたWebクライアントの実装
3. ✅ 認証機能の実装
4. ✅ リアルタイムコマンド実行機能

### 中期目標
1. HTTPSおよびWSSの実装によるセキュリティ強化
2. より詳細なアクセス制御（コマンドのホワイトリスト化）
3. セッション管理の改善
4. エラーハンドリングの強化
5. Claude Codeの出力フォーマットの最適化

### 長期目標
1. ネイティブiOSアプリとしての再実装
2. Androidサポート
3. 複数セッションの同時管理
4. ファイル転送機能
5. リモートデバッグ機能

## 現状の状況

### 実装済み機能
- **サーバー側（Node.js + Express + WebSocket）**
  - WebSocketサーバー（ポート8090）
  - JWT認証
  - Claude Codeプロセスの起動と制御
  - リアルタイム出力ストリーミング

- **クライアント側（React + TypeScript + Vite）**
  - PWA対応のWebアプリ
  - iPhone最適化UI（縦長画面、タッチ操作）
  - WebSocket接続管理
  - ターミナルエミュレーション
  - クイックコマンドボタン

### 技術スタック
- **Backend**: Node.js, Express, WebSocket (ws), JWT, bcrypt
- **Frontend**: React, TypeScript, Vite, Zustand（状態管理）
- **開発ツール**: PM2（プロセス管理）、PowerShell（セットアップスクリプト）

## 課題事項

### セキュリティ関連
1. **平文通信**: 現在HTTPとWSで通信しているため、中間者攻撃のリスクあり
2. **固定パスワード**: パスワードがソースコードに埋め込まれている
3. **コマンド制限なし**: すべてのClaude Codeコマンドが実行可能
4. **セッション管理**: セッションタイムアウトや同時接続数の制限がない

### 機能関連
1. **エラーリカバリー**: WebSocket切断時の自動再接続が不完全
2. **文字エンコーディング**: 日本語出力が文字化けする可能性
3. **大量出力の処理**: 大量のコンソール出力時のパフォーマンス問題
4. **プロセス管理**: Claude Codeプロセスの異常終了時の処理が不十分

### ユーザビリティ
1. **初期設定の複雑さ**: 手動でのIPアドレス入力が必要
2. **エラーメッセージ**: ユーザーフレンドリーでないエラー表示
3. **オフライン対応**: PWAだがオフライン時の挙動が未定義
4. **画面回転**: 横画面での表示が最適化されていない

### 運用関連
1. **ログ管理**: アクセスログやエラーログの記録がない
2. **監視**: サーバーの死活監視機能がない
3. **自動起動**: Windows起動時の自動起動設定がない
4. **更新機能**: アプリケーションの更新方法が未定義

## 今後の改善提案

### 優先度：高
1. HTTPS/WSSの実装（Let's Encryptまたは自己署名証明書）
2. 環境変数による設定管理の改善
3. コマンドのホワイトリスト/ブラックリスト機能
4. 適切なエラーハンドリングとユーザー通知

### 優先度：中
1. mDNSによる自動サーバー検出
2. QRコードによる接続設定
3. ダークモード/ライトモードの切り替え
4. コマンド履歴の永続化

### 優先度：低
1. 音声入力対応
2. ジェスチャーコントロール
3. ウィジェット対応
4. Apple Watch対応